<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Lottery front-end</title>
    <link rel="stylesheet" type="text/css" href="cssIndex.css" />
    <script language="javascript" type="text/javascript" src="jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="web3.js"></script>
    <script language="javascript" type="text/javascript" src="main_abi.js"></script>

    <script language="javascript" type="text/javascript" src="js/utils.js"></script>
    <script language="javascript" type="text/javascript" src="js/userControls.js"></script>
    <script language="javascript" type="text/javascript" src="js/commonControls.js"></script>
  <!--    <script language="javascript" type="text/javascript" src="js/ownerControls.js"></script> -->

  </head>

  <body onload="checkMetamaskAndStart()">

    <div id="initialError">
      Problem loading contract. Check your Metamask account.
    </div>

    <div id="offerBetting">
      <div class="rouletteWholeTable" class="rouletteBorder">
        <div class="rouletteContainer">
          <div class="rouletteVertical">
            <div id="num0" class="rouletteNumber rouletteGreen">
              <div class="rouletteNumberInner">
                0
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num3" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                3
              </div>
            </div>
            <div id="num2" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                2
              </div>
            </div>
            <div id="num1" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                1
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num6" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                6
              </div>
            </div>
            <div id="num5" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                5
              </div>
            </div>
            <div id="num4" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                4
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num9" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                9
              </div>
            </div>
            <div id="num8" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                8
              </div>
            </div>
            <div id="num7" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                7
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num12" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                12
              </div>
            </div>
            <div id="num11" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                11
              </div>
            </div>
            <div id="num10" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                10
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num15" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                15
              </div>
            </div>
            <div id="num14" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                14
              </div>
            </div>
            <div id="num13" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                13
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num18" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                18
              </div>
            </div>
            <div id="num17" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                17
              </div>
            </div>
            <div id="num16" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                16
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num21" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                21
              </div>
            </div>
            <div id="num20" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                20
              </div>
            </div>
            <div id="num19" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                19
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num24" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                24
              </div>
            </div>
            <div id="num23" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                23
              </div>
            </div>
            <div id="num22" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                22
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num27" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                27
              </div>
            </div>
            <div id="num26" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                26
              </div>
            </div>
            <div id="num25" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                25
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num30" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                30
              </div>
            </div>
            <div id="num29" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                29
              </div>
            </div>
            <div id="num28" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                28
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num33" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                33
              </div>
            </div>
            <div id="num32" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                32
              </div>
            </div>
            <div id="num31" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                31
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num36" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                36
              </div>
            </div>
            <div id="num35" class="rouletteNumber rouletteBlack">
              <div class="rouletteNumberInner">
                35
              </div>
            </div>
            <div id="num34" class="rouletteNumber rouletteRed">
              <div class="rouletteNumberInner">
                34
              </div>
            </div>
          </div>
          <div class="rouletteVertical">
            <div id="num39" class="rouletteNumber">
              <div class="rouletteNumberInner">
                3rd
              </div>
            </div>
            <div id="num38" class="rouletteNumber">
              <div class="rouletteNumberInner">
                2nd
              </div>
            </div>
            <div id="num37" class="rouletteNumber">
              <div class="rouletteNumberInner">
                1st
              </div>
            </div>
          </div>
        </div>
        <div class="lowerGroupsContainer">
          <div class="rouletteContainer">
            <div class="rouletteVerticalGroup">
              <div class="rouletteQuadBox">
                <div id="num40" class="rouletteNumber">
                  <div class="rouletteNumberInner">
                    1st 12
                  </div>
                </div>
              </div>
              <div class="rouletteContainer">
                <div class="rouletteDoubleBox">
                  <div id="num43" class="rouletteNumber">
                    <div class="rouletteNumberInner">
                      1 to 18
                    </div>
                  </div>
                </div>
                <div class="rouletteDoubleBox">
                  <div id="num46" class="rouletteNumber">
                    <div class="rouletteNumberInner">
                      Even
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="rouletteVerticalGroup">
              <div class="rouletteQuadBox">
                <div id="num41" class="rouletteNumber">
                  <div class="rouletteNumberInner">
                    2nd 12
                  </div>
                </div>
              </div>
              <div class="rouletteContainer">
                <div class="rouletteDoubleBox rouletteRed">
                  <div id="num47" class="rouletteNumber">
                    <div class="rouletteNumberInner">
                      Red
                    </div>
                  </div>
                </div>
                <div class="rouletteDoubleBox rouletteBlack">
                  <div id="num48" class="rouletteNumber">
                    <div class="rouletteNumberInner">
                      Black
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="rouletteVerticalGroup">
              <div class="rouletteQuadBox">
                <div id="num42" class="rouletteNumber">
                  <div class="rouletteNumberInner">
                    3rd 12
                  </div>
                </div>
              </div>
              <div class="rouletteContainer">
                <div class="rouletteDoubleBox">
                  <div id="num45" class="rouletteNumber">
                    <div class="rouletteNumberInner">
                      Odd
                    </div>
                  </div>
                </div>
                <div class="rouletteDoubleBox">
                  <div id="num44" class="rouletteNumber">
                    <div class="rouletteNumberInner">
                      19 to 36
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button class="button" onclick="calculateBets()">Preview bets</button>

      <div id="listBets">
      </div>

      <div id="maxProfit">
      </div>

      <button id="sendBetsButton" class="button" onclick="sendBets()">Send bets</button>
    </div>

    <div id="statusBlock">
      <div class="statusLine">
        <div class="statusTitle">
          Contract balance:
        </div>
        <div id="txContractBalance"> </div>
      </div>

      <div class="statusLine">
        <div class="statusTitle">
          Game status:
        </div>
        <div id="txLastAction">
        </div>
      </div>
    </div>

      <div id="claimBetsButtons">
        <button class="button" onclick="claimBet()">Claim bets</button>
        <button class="button" onclick="forgetBet()">Forget bets</button>
      </div>

      <div id="winsKnown">
        <div id="txWins"> </div>
        <div id="txWinsNumber"> </div>
      </div>

      <div id="reloadBettingButton">
        <button class="button" onclick="reloadBetting()">Bet again</button>
      </div>

      <div id="howtoTitle">
        How to play the game
      </div>
      <div class="howtoSubtitle">
        Prerequisites
      </div>
      <ol>
        <li>
          <div class="howtoTextLine">
            To play this ethereum roulette you will firstly need to install Metamask Plugin.
            You can find more about Metamask on their <a href="https://metamask.io/">website</a>
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
            Blockchain games consist of a web frontend, which is the page you currently view and also an
            Ethereum contract which you can think of as the 'backend'. The contract of this game is
            currently deployed on the "Ropsten" test network. On test networks, unlike the "mainnet" ether
            does not cost you real money and you can ask and receive it for free. The second step you need
            to do is receive some free ether. For this purpose you can use any of those sites:
            <ul>
              <li> <a href="http://faucet.ropsten.be:3001"> faucet.ropsten.be </a> </li>
              <li> <a href="https://faucet.metamask.io/"> faucet.metamask.io </a> </li>
            </ul>
            Or you can google for "Ropsten free ether". Requesting just 1 ether would be enough.
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
            Once you verify that Metamask sees your newly received ether on the Ropsten test network, you
            are ready  to play!
          </div>
        </li>
      </ol>
      <div class="howtoSubtitle">
        Gameplay
      </div>
      <ol>
        <li>
          <div class="howtoTextLine">
          The inital game status would be "Expecting your bet". When in this state you can click on the
          betting board and little input fields would appear. The ether unit used throughout the game is
          "Finney", that is 1/1000 of an Ether. Your minium bet is 1 Finney and your maximum bet is
          1000 Finney.
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
          You can bet at maximum of 10 positions before submitting your bet. Once you are ready you should
          click on "Preview bets". The system will list all your bets along with some calculations on what
          your maximum profit is.
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
          When you make sure that the system has correctly previewed your bets you can click on "Send bets"
          button. That action should pop-up an Metamask window which will request your authorization. You
          authorize the Metamask plugin to send your request on the blockchain by clicking "Submit".
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
          The winning number becomes known after a while, you may have to wait up to a minute. Then the game
          status would change to "Next block is mined. Winning number is now known."
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
          At this point you are presented with two options - see the winning number and claim your bet if any,
          or erase your bet. Most probably you would want to see the winning number by clicking "Claim bets"
          button.
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
          Another Metamask window will pop-up asking for your authorization again.
          </div>
        </li>
        <li>
          <div class="howtoTextLine">
          Finnally a "Game outcome" field will appear which will summarize what the outcome is.
          </div>
         </li>
      </ol>

  </body>
</html>
